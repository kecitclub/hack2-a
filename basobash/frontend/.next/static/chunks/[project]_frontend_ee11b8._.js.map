{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/OMEN/Desktop/hack2-a/basobash/frontend/frontend/components/geocodedListMap.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Popup,\n  useMap,\n  useMapEvents,\n} from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport dynamic from \"next/dynamic\";\n\nconst GEOAPIFY_API_KEY = \"1f3eec48fa604cf7b262e4d4ba1d004c\";\n\n// Fix for Leaflet's default icon\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\n});\n\n// Update customIcon definition to use absolute paths\nconst customIcon = new L.Icon({\n  iconUrl: \"/leaflet/dist/images/marker-icon.png\",\n  iconRetinaUrl: \"/leaflet/dist/images/marker-icon-2x.png\",\n  shadowUrl: \"/leaflet/dist/images/marker-shadow.png\",\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41],\n});\n\nconst GeocodedListMap = () => {\n  const [markers, setMarkers] = useState([]);\n  const [desiredLocation, setDesiredLocation] = useState(null);\n\n  const AddMarker = () => {\n    const map = useMap();\n    useMapEvents({\n      dblclick: (e) => {\n        const { lat, lng } = e.latlng;\n        setMarkers([...markers, { lat, lng }]);\n      },\n    });\n\n    useEffect(() => {\n      if (desiredLocation) {\n        const { lat, lng } = desiredLocation;\n        map.flyTo([lat, lng], 13, { animate: true });\n      }\n    }, [desiredLocation, map]);\n\n    return null;\n  };\n\n  const fetchGeocodedLocation = async (query) => {\n    const url = `https://api.geoapify.com/v1/geocode/search?text=${encodeURIComponent(query)}&apiKey=${GEOAPIFY_API_KEY}`;\n    try {\n      const response = await fetch(url);\n      const data = await response.json();\n      if (data.features && data.features.length > 0) {\n        const { lat, lon } = data.features[0].geometry.coordinates;\n        setDesiredLocation({ lat, lng: lon });\n      }\n    } catch (error) {\n      console.error(\"Error fetching geocoded location:\", error);\n    }\n  };\n\n  const handleSaveToDB = () => {\n    console.log(\"Saving markers to database:\", markers);\n    alert(`Markers saved to database.`);\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col items-center justify-start\">\n      {/* Search input with styling */}\n      <div className=\"absolute top-5 left-5 w-3/4 md:w-1/2 z-50\">\n        <input\n          type=\"text\"\n          placeholder=\"Enter a location to pan\"\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\") fetchGeocodedLocation(e.target.value);\n          }}\n          className=\"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        />\n      </div>\n\n      {/* Map container */}\n      <div className=\"w-full z-10 h-full\">\n        <MapContainer\n          center={[27.7172, 85.324]}\n          zoom={13}\n          style={{ height: \"100%\", width: \"100%\" }}\n        >\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          />\n          <AddMarker />\n          {markers.map((marker, index) => (\n            <Marker\n              key={index}\n              icon={customIcon}\n              position={[marker.lat, marker.lng]}\n            >\n              <Popup>\n                Marker at {marker.lat}, {marker.lng}\n              </Popup>\n            </Marker>\n          ))}\n        </MapContainer>\n      </div>\n\n      {/* Save button */}\n      <div className=\"absolute bottom-5 left-5 z-50\">\n        <button \n          onClick={handleSaveToDB}\n          className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow-lg\"\n        >\n          Save Markers to Database\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default GeocodedListMap;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}