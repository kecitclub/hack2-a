{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/OMEN/Desktop/hack2-a/basobash/frontend/Desktop/hack2-a/basobash/frontend/components/listForm.jsx"],"sourcesContent":["\"use client\";\n\nimport { Form, Input, Button } from \"@nextui-org/react\";\nimport { RadioGroup, Radio } from \"@nextui-org/react\";\nimport { useState } from \"react\";\n\nconst ListForm = ({ marker }) => {\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    price: 0,\n    location: \"\",\n    bedrooms: 0,\n    bathrooms: 0,\n    kitchen: \"no\",\n    images: [],\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n  \n\n    if (\n      !formData.title ||\n      !formData.price ||\n      !formData.bedrooms ||\n      !formData.bathrooms\n    ) {\n      alert(\"Please fill out all required fields.\");\n      return;\n    }\n  \n    try {\n      const response = await fetch(\"/api/properties\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          ...formData,\n          kitchen: formData.kitchen === \"yes\" ? 1 : 0,\n          location: marker\n            ? `Lat: ${marker.lat}, Lng: ${marker.lng}`\n            : formData.location,\n        }),\n      });\n  \n      if (response.ok) {\n        const data = await response.json();\n        alert(\"Property listed successfully!\");\n        console.log(data);\n      } else {\n        const errorData = await response.json();\n        alert(`Error: ${errorData.message}`);\n      }\n    } catch (error) {\n      console.error(error);\n      alert(\"An error occurred. Please try again.\");\n    }\n  };\n  \n\n  return (\n    <div>\n      <Form className=\"w-full max-w-xs\" onSubmit={handleSubmit}>\n        <Input\n          errorMessage=\"Please add a valid image\"\n          label=\"Images\"\n          labelPlacement=\"outside\"\n          name=\"images\"\n          type=\"file\"\n          placeholder=\"Image URLs (comma-separated)\"\n          onChange={handleChange}\n        />\n        <Input\n          errorMessage=\"Please enter a valid phone number\"\n          label=\"Phone\"\n          labelPlacement=\"outside\"\n          name=\"price\"\n          placeholder=\"Enter your price\"\n          type=\"number\"\n          onChange={handleChange}\n        />\n        <Input\n          errorMessage=\"Please enter a valid rent fee\"\n          label=\"Rent Fee\"\n          labelPlacement=\"outside\"\n          name=\"price\"\n          placeholder=\"Enter rent fee\"\n          type=\"number\"\n          onChange={handleChange}\n        />\n        <Input\n          errorMessage=\"Please enter valid number of bedroom\"\n          label=\"No. of bedroom\"\n          labelPlacement=\"outside\"\n          name=\"bedrooms\"\n          placeholder=\"Enter no. of bedrooms\"\n          type=\"number\"\n          onChange={handleChange}\n        />\n        <Input\n          errorMessage=\"Please enter valid number of bathroom\"\n          label=\"No. of bathroom\"\n          labelPlacement=\"outside\"\n          name=\"bathrooms\"\n          placeholder=\"Enter no. of bathrooms\"\n          type=\"number\"\n          onChange={handleChange}\n        />\n        <RadioGroup\n          label=\"Has a Kitchen\"\n          onChange={(value) => setFormData({ ...formData, kitchen: value })}\n        >\n          <Radio value=\"yes\">Yes</Radio>\n          <Radio value=\"no\">No</Radio>\n        </RadioGroup>\n\n        <Input\n          errorMessage=\"Please enter a description\"\n          label=\"Description\"\n          labelPlacement=\"outside\"\n          name=\"description\"\n          placeholder=\"Enter description (optional)\"\n          type=\"text\"\n          onChange={handleChange}\n        />\n\n        <Button type=\"submit\" variant=\"bordered\">\n          Submit\n        </Button>\n      </Form>\n    </div>\n  );\n};\n\nexport default ListForm;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/OMEN/Desktop/hack2-a/basobash/frontend/Desktop/hack2-a/basobash/frontend/components/geocodedListMap.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Popup,\n  useMap,\n  useMapEvents,\n} from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport ListForm from \"./listForm\";\n\nconst GEOAPIFY_API_KEY = \"1f3eec48fa604cf7b262e4d4ba1d004c\";\n\n// Fix for Leaflet's default icon\nL.Icon.Default.imagePath = \"/\";\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"marker-icon-2x.png\",\n  iconUrl: \"marker-icon.png\",\n  shadowUrl: \"marker-shadow.png\",\n});\n\ninterface Location {\n  lat: number;\n  lon: number;\n  name: string;\n}\n\ninterface Feature {\n  geometry: { coordinates: [number, number] };\n  properties: { formatted: string };\n}\n\ninterface MarkerType {\n  lat: number;\n  lng: number;\n}\n\nconst GeocodedListMap = () => {\n  const [marker, setMarker] = useState<MarkerType | null>(null);\n  const [query, setQuery] = useState(\"\");\n  const [suggestions, setSuggestions] = useState<Feature[]>([]);\n  const [selectedLocation, setSelectedLocation] = useState<MarkerType | null>(\n    null\n  );\n  const [showListForm, setShowListForm] = useState(false);\n\n  const AddMarker = () => {\n    const map = useMap();\n    useMapEvents({\n      dblclick: (e) => {\n        const { lat, lng } = e.latlng;\n        setMarker({ lat, lng });\n      },\n    });\n\n    useEffect(() => {\n      // Get user's location on mount\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          map.flyTo([latitude, longitude], 13, {\n            animate: true,\n          });\n        },\n        (error) => {\n          console.error(\"Error getting user location:\", error);\n        }\n      );\n    }, [map]); // Only run once when map is available\n\n    useEffect(() => {\n      if (selectedLocation) {\n        map.flyTo([selectedLocation.lat, selectedLocation.lng], 13, {\n          animate: true,\n        });\n      }\n    }, [map, selectedLocation]);\n\n    return null;\n  };\n\n  const fetchSuggestions = async (searchText: string) => {\n    if (!searchText) {\n      setSuggestions([]);\n      return;\n    }\n    const url = `https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(\n      searchText\n    )}&apiKey=${GEOAPIFY_API_KEY}`;\n    try {\n      const response = await fetch(url);\n      const data = await response.json();\n      setSuggestions(data.features || []);\n    } catch (error) {\n      console.error(\"Error fetching Geoapify suggestions:\", error);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setQuery(e.target.value);\n    fetchSuggestions(e.target.value);\n  };\n\n  const handleSuggestionClick = (feature: Feature) => {\n    const [lon, lat] = feature.geometry.coordinates;\n    const newLocation = { lat, lng: lon };\n    setMarker(newLocation);\n    setSelectedLocation(newLocation);\n    setSuggestions([]);\n    setQuery(feature.properties.formatted);\n  };\n\n  const handleSaveToDB = () => {\n    if (marker) {\n      setShowListForm((prev) => !prev);\n    } else {\n      alert(\"Please add a marker before saving.\");\n    }\n  };\n\n  return (\n    <div className=\"h-[500px] w-full flex flex-col justify-center items-center relative\">\n      {/* Search input with autocomplete - improved spacing and z-index */}\n\n      <div className=\"flex flex-row gap-10 h-full w-full\">\n        <div className=\"flex flex-row h-full w-full\">\n          {/* Map container - added border and shadow */}\n          <div\n            className={`flex-grow transition-all duration-300 rounded-lg overflow-hidden shadow-lg ${\n              showListForm ? \"w-1/2\" : \"w-full\"\n            }`}\n          >\n            <MapContainer\n              center={[27.7172, 85.324]}\n              zoom={13}\n              style={{ height: \"100%\", width: \"100%\" }}\n              className=\"z-10\"\n            >\n              <div className=\"absolute top-4 left-0 right-0 px-4 z-[1000]\">\n                <div className=\"relative w-full max-w-sm mx-auto\">\n                  <input\n                    type=\"text\"\n                    value={query}\n                    onChange={handleInputChange}\n                    placeholder=\"Search for a location...\"\n                    className=\"w-full p-3 border border-gray-300 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\n                  />\n                  {suggestions.length > 0 && (\n                    <ul className=\"absolute z-[1001] w-full bg-white shadow-xl rounded-lg mt-1 max-h-60 overflow-y-auto border border-gray-200\">\n                      {suggestions.map((feature, index) => (\n                        <button\n                          key={index}\n                          className=\"w-full p-3 text-left hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0\"\n                          onClick={() => handleSuggestionClick(feature)}\n                          onKeyDown={(e) =>\n                            e.key === \"Enter\" && handleSuggestionClick(feature)\n                          }\n                          tabIndex={0}\n                        >\n                          {feature.properties.formatted}\n                        </button>\n                      ))}\n                    </ul>\n                  )}\n                </div>\n              </div>\n              <TileLayer\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n              />\n              <AddMarker />\n              {marker && (\n                <Marker position={[marker.lat, marker.lng]}>\n                  <Popup>\n                    Marker at {marker.lat}, {marker.lng}\n                  </Popup>\n                </Marker>\n              )}\n            </MapContainer>\n          </div>\n\n          {/* ListForm - improved border styling */}\n        </div>\n        {showListForm && (\n          <div className=\"w-1/2 h-full p-4 bg-white border-l border-gray-200 overflow-y-auto shadow-inner\">\n            <ListForm marker={marker} />\n          </div>\n        )}\n      </div>\n      {/* Save button - improved positioning and styling */}\n      <div className=\"absolute bottom-5 left-5 z-[1000]\">\n        <button\n          onClick={handleSaveToDB}\n          className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-colors duration-200\"\n        >\n          {showListForm ? \"Hide Form\" : \"Add Location\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default GeocodedListMap;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}